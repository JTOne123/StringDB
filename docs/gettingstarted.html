<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>StringDB</title>

        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/font-awesome.min.css">
        <link rel="stylesheet" href="/css/highlight.dark.css">
        <link rel="stylesheet" href="/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="/">
                StringDB
                <small class="hidden-xs hidden-sm">
                    StringDB is a fast, powerful, lightweight archival-style DB that uses mainly (you guessed it!) strings.
                </small>
            </a>

                            <a href="https://github.com/SirJosh3917/StringDB">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="">
                                    <a href="/">
                                        Home
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/gettingstarted.html">
                                        Getting Started
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/reference/index.html">
                                        Class Documentation
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="/stringdbxml.html">
                                        Auto-generated XML docs
                                    </a>
                                </li>
                                                    </ul>

                    </nav>

                
                <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="stringdb-beginner-tutorial">StringDB Beginner Tutorial</h1>
<p><em>Lead by example</em></p>
<ul>
<li><a href="#beforehand">Beforehand</a></li>
<li><a href="#hello-world">Hello, World!</a></li>
<li><a href="#insert-amp-gets-failures">Insert &amp; Get's Failures</a></li>
<li><a href="#multiple-indexes">Multiple Indexes!</a></li>
<li><a href="#getvalueas">GetValueAs</a></li>
<li><a href="#thread-safeness">Thread Safeness?</a></li>
<li><a href="#overwriting-values">Overwriting Values</a></li>
</ul>
<h2 id="beforehand">Beforehand</h2>
<p>This tutorial should tell you anything you need to know for using StringDB.</p>
<p>I'll assume that you've already gotten the nuget package of it and have a <code>using</code> statement at the top of your code already.</p>
<p>It's important that you keep this philosophy in mind:</p>
<pre><code>I will use the functions that meet my needs exactly.</code></pre>
<p>For example, if you're going to insert a single item, you shouldn't <code>InsertRange</code> an <code>IEnumerable</code> of <code>KeyValuePairs</code> instead of using the built in <code>Insert</code> method.
What if later I optimize <code>Insert</code> so it doesn't internally use <code>InsertRange</code> anymore? This is why you should use the methods that meet your needs exactly.</p>
<h2 id="hello-world">Hello, World!</h2>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.Insert&lt;string, string&gt;("my-first-db", "Hello, World!");

    Console.WriteLine(db.Get&lt;string&gt;("my-first-db").GetValue&lt;string&gt;());
}</code></pre>
<pre><code>Hello, World!</code></pre>
<p>Congrats, after compiling this code you've stored &quot;Hello, World!&quot; into a StringDB Database! Bravo! But what did you even do besides copy and pasting some code?</p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {</code></pre>
<p>StringDB has something called a <code>Database</code>, and you called upon the static method <code>Database.FromFile()</code>.
This automagically creates a FileStream, and by putting the database in a using statement, when you dispose of the database, you'll also dispose of the stream.</p>
<p>Nice nice!</p>
<pre><code class="language-cs">db.Insert&lt;string, string&gt;("my-first-db", "Hello, World!");</code></pre>
<p>Here you took the value <code>Hello, World!</code> and associated it with the key <code>my-first-db</code>.
We'll get to why you specified them as strings <a href="#typemanager">later</a></p>
<pre><code class="language-cs">Console.WriteLine(db.Get&lt;string&gt;("my-first-db").GetValue&lt;string&gt;());</code></pre>
<p>First, we tell the database to find the index called <code>my-first-db</code>, and again, specify that as a string. We'll get to that <a href="#typemanager">later</a>
After that, we get an <code>IReaderPair</code>. Read up about IReaderPairs <a href="reference/IReaderPair.html">here</a></p>
<p>We call <code>GetValue&lt;string&gt;()</code> to read out the string value, since we know we inserted it as a string.</p>
<p>That's it!</p>
<h2 id="insert-amp-gets-failures">Insert &amp; Get's Failures</h2>
<p>If you were to only use Insert and Get, you're probably doing it wrong.</p>
<p>Insert internally uses <code>InsertRange</code>, so if you can insert multiple items by calling InsertRange at all, you should.
<code>InsertRange</code> is a much better alternative, if you can use it.</p>
<p>Get throws exceptions if it can't find the object you're looking for. <code>TryGet&lt;T&gt;</code> doesn't. It returns a boolean if it found it.</p>
<h2 id="multiple-indexes">Multiple Indexes!</h2>
<p>Most databases, an index has to be <em>unique</em> and <em>special</em>. Not here. Checking if an index already exists takes up your precious time, which StringDB will not waste.</p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.InsertRange&lt;string, string&gt;(new KeyValuePair&lt;string, string&gt;[] {
        new KeyValuePair&lt;string, string&gt;("multidex", "Hello,"),
        new KeyValuePair&lt;string, string&gt;("multidex", " "),
        new KeyValuePair&lt;string, string&gt;("multidex", "World!"),
    });

    Console.WriteLine(db.Get&lt;string&gt;("multidex").GetValue&lt;string&gt;());
}</code></pre>
<p>This code will compile <em>and</em> run <em>without</em> errors. But what will it output?</p>
<p>The answer is <code>Hello,</code>. This is because it's first.</p>
<pre><code>Hello,</code></pre>
<p>Now how in the name of heck do you go about getting the <code>World!</code> from this?</p>
<p>The answer is using <code>GetAll&lt;T&gt;</code></p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.InsertRange&lt;string, string&gt;(new KeyValuePair&lt;string, string&gt;[] {
        new KeyValuePair&lt;string, string&gt;("multidex", "Hello,"),
        new KeyValuePair&lt;string, string&gt;("multidex", " "),
        new KeyValuePair&lt;string, string&gt;("multidex", "World!"),
    });

    foreach(var i in db.GetAll&lt;string&gt;("multidex")) {
        Console.Write(i.GetValue&lt;string&gt;());
    }
}</code></pre>
<pre><code>Hello, World!</code></pre>
<p><code>Get&lt;T&gt;</code> internally uses <code>GetAll&lt;T&gt;</code> and returns the first occurence of whatever it finds anyways.</p>
<p>By using <code>GetAll&lt;T&gt;</code>, you can get the values of multiple indexes.</p>
<p>In this scenario, we will now see <code>Hello, World!</code> appear on the screen.</p>
<p>Lovely!</p>
<h2 id="getvalueas">GetValueAs<T></h2>
<p>We've been using <code>GetValue&lt;string&gt;</code> all day. But what if it's not a <string>?</p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.Insert&lt;string, byte[]&gt;("test", new byte[]{ 0x48, 0x69, 0x21 });

    Console.WriteLine(db.Get&lt;string&gt;("test").GetValue&lt;string&gt;());
}</code></pre>
<p>This code has an obvious fault - we're inserting a <code>byte[]</code> and trying to read it as a <code>string</code>.</p>
<pre><code>System.Exception: 'The data you are trying to read is not of type System.String, it is of type System.Byte[]'</code></pre>
<p><code>GetValueAs&lt;T&gt;</code> comes to the rescue. <code>GetValueAs&lt;T&gt;</code> will ignore whatever type the value is <em>supposed</em> to be, and forces it to try be of the type you <em>want</em> it to be.</p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.Insert&lt;string, byte[]&gt;("test", new byte[]{ 0x48, 0x69, 0x21 });

    Console.WriteLine(db.Get&lt;string&gt;("test").GetValueAs&lt;string&gt;());
}</code></pre>
<p>This code will work fine! Because <code>string</code>, <code>byte[]</code>, and <code>Stream</code> are very similar in the manner needed to store them, you can use the three of them interchangeably. ( Just beware of really long streams )</p>
<pre><code>Hi!</code></pre>
<p>Try use <code>GetValueType();</code> if you want to see the value of the type.</p>
<h2 id="thread-safeness">Thread Safeness?</h2>
<p>No, Database and everything else is <em>not</em> thread safe. If you're using it in an async context, or in some kind of Thread, I recommend using <code>ThreadSafeDatabase</code>.</p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db").MakeThreadSafe()) {
    Parallel.For(0, 1_000_000, (i) =&gt; {
        db.Insert("test", "value");
    });
}</code></pre>
<p>This code would raise hell if the <code>.MakeThreadSafe();</code> function wasn't there.</p>
<p>ThreadSafeness is achieved by wrapping a <code>lock</code> around any and all methods, as well as during reading any <code>IReaderPair</code>.</p>
<p>I'd try to stay away from a ThreadSafeDatabase whenever possible for speed purposes, but you do you!</p>
<h2 id="overwriting-values">Overwriting Values</h2>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.Insert&lt;string, string&gt;("misclick", "This is a tyop!");

    Console.WriteLine(db.Get&lt;string&gt;("misclick").GetValue&lt;string&gt;());
}</code></pre>
<pre><code>This is a tyop!</code></pre>
<p>Uh-oh! You made a boo boo. It says <code>tyop</code> instead of <code>typo</code>!
Lucky for you, I've made the <code>OverwriteValue</code> function just for you!</p>
<pre><code class="language-cs">using (var db = Database.FromFile("stringdb.db")) {
    db.Insert&lt;string, string&gt;("misclick", "This is a tyop!");

    var misclick = db.Get&lt;string&gt;("misclick");
    Console.WriteLine(misclick.GetValue&lt;string&gt;());

    db.OverwriteValue&lt;string&gt;(misclick, "This is not a typo!");

    // now that we modified it, we have to re-get it

    misclick = db.Get&lt;string&gt;("misclick");

    Console.WriteLine(misclick.GetValueAs&lt;string&gt;());
}</code></pre>
<pre><code>This is a tyop!
This is not a typo!</code></pre>
<p>Beware of calling <code>OverwriteValue</code> too frequently though! Especially if the data you're overwriting is larger then the older data, for example in this case.
It will leave traces within the file itself of a previous value that nothing leads to.</p>
<p>Also beware of calling <code>OverwriteValue</code> and then <strong>not</strong> updating your reference value.
If you call <code>OverwriteValue</code> without re-getting the item, you've just entered &quot;unknown territory&quot;.</p>
<p>If the new value is smaller then the old value, <code>GetValue&lt;string&gt;()</code> will work as expected - getting the new value. If the new value is larger then the old value, this will just return the old value. This is why you need to re-get the value.</p>
                </section>

            </div>
        </main>

        <footer>
            <div class="container-fluid">
                <p class="text-muted">
                    website generated with <a href="http://couscous.io" title="Markdown website generator">Couscous</a>
                </p>
            </div>
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>
        <!-- Livereload -->
        <script>
            document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
                    ':35729/livereload.js?snipver=1"></' + 'script>')
        </script>
        <!-- End Livereload -->
    </body>
</html>
